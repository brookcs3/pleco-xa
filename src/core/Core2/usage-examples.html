<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PlecoXA - Quick Start Examples</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f0f0f0;
    }
    
    .example {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .example h2 {
      margin-top: 0;
      color: #333;
    }
    
    .code {
      background: #f8f8f8;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 15px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
    }
    
    .controls {
      margin: 20px 0;
    }
    
    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
      font-size: 16px;
    }
    
    button:hover {
      background: #45a049;
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    
    #drop-zone {
      border: 3px dashed #4CAF50;
      border-radius: 8px;
      padding: 40px;
      text-align: center;
      margin: 20px 0;
      transition: all 0.3s ease;
    }
    
    #drop-zone.dragover {
      background: #e8f5e9;
      border-color: #2e7d32;
    }
    
    .output {
      background: #263238;
      color: #aed581;
      padding: 15px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      margin-top: 10px;
      min-height: 50px;
    }
  </style>
</head>
<body>
  <h1>ðŸŽµ PlecoXA Quick Start Examples</h1>
  
  <!-- Example 1: Load and Play in 3 Lines -->
  <div class="example">
    <h2>Example 1: Load and Play Audio in 3 Lines</h2>
    <div class="code">
const pleco = new PlecoXA();<br>
await pleco.load('https://example.com/audio.mp3');<br>
pleco.play();
    </div>
    
    <div class="controls">
      <button id="example1-load">Load Sample</button>
      <button id="example1-play" disabled>Play</button>
      <button id="example1-stop" disabled>Stop</button>
    </div>
    
    <div class="output" id="example1-output">Ready to load audio...</div>
  </div>
  
  <!-- Example 2: Drag & Drop with BPM -->
  <div class="example">
    <h2>Example 2: Drag & Drop with Auto BPM Detection</h2>
    <div class="code">
const pleco = new PlecoXA({ container: '#viz' });<br>
<br>
// Setup drag & drop<br>
dropZone.addEventListener('drop', async (e) => {<br>
  &nbsp;&nbsp;const file = e.dataTransfer.files[0];<br>
  &nbsp;&nbsp;await pleco.load(file);<br>
  &nbsp;&nbsp;const bpm = await pleco.getBPM();<br>
  &nbsp;&nbsp;console.log(`Detected BPM: ${bpm}`);<br>
});
    </div>
    
    <div id="drop-zone">
      <p>ðŸŽµ Drop an audio file here</p>
      <p>or <input type="file" id="file-input" accept="audio/*" style="display: none;">
      <button onclick="document.getElementById('file-input').click()">Choose File</button></p>
    </div>
    
    <div id="viz-container"></div>
    <div class="output" id="example2-output">Waiting for audio file...</div>
  </div>
  
  <!-- Example 3: Live BPM Visualization -->
  <div class="example">
    <h2>Example 3: Live BPM Pulse with GSAP</h2>
    <div class="code">
// React to beat events<br>
pleco.bpm.on('beat', (data) => {<br>
  &nbsp;&nbsp;// Pulse visualization on each beat<br>
  &nbsp;&nbsp;pleco.viz.pulse(data);<br>
  &nbsp;&nbsp;<br>
  &nbsp;&nbsp;// Your custom animation<br>
  &nbsp;&nbsp;gsap.to('.my-element', {<br>
  &nbsp;&nbsp;&nbsp;&nbsp;scale: 1.2,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;duration: 0.1,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;yoyo: true,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;repeat: 1<br>
  &nbsp;&nbsp;});<br>
});
    </div>
    
    <div class="controls">
      <button id="example3-demo">Start Demo</button>
    </div>
    
    <div id="beat-viz" style="margin: 20px 0;">
      <div id="beat-circle" style="width: 100px; height: 100px; background: #4CAF50; border-radius: 50%; margin: 0 auto;"></div>
    </div>
  </div>
  
  <!-- Example 4: Customize Everything -->
  <div class="example">
    <h2>Example 4: Custom Theme & Events</h2>
    <div class="code">
// Custom configuration<br>
const pleco = new PlecoXA({<br>
  &nbsp;&nbsp;container: document.querySelector('#my-viz'),<br>
  &nbsp;&nbsp;theme: 'neon' // or custom theme object<br>
});<br>
<br>
// Listen to all events<br>
pleco.on('load', () => console.log('Audio loaded'));<br>
pleco.on('play', () => console.log('Playback started'));<br>
pleco.on('beat', (data) => console.log('Beat!', data));<br>
pleco.on('bpm', (bpm) => console.log('BPM:', bpm));<br>
<br>
// Custom theme<br>
pleco.viz.setTheme({<br>
  &nbsp;&nbsp;primary: '#ff1744',<br>
  &nbsp;&nbsp;secondary: '#00e676',<br>
  &nbsp;&nbsp;background: '#000',<br>
  &nbsp;&nbsp;accent: '#ffea00'<br>
});
    </div>
    
    <div class="controls">
      <button id="theme-winamp">Winamp Theme</button>
      <button id="theme-neon">Neon Theme</button>
      <button id="theme-custom">Custom Theme</button>
    </div>
    
    <div id="custom-viz"></div>
  </div>

  <script type="module">
    // Simulated PlecoXA implementation for demo
    class PlecoXA {
      constructor(options = {}) {
        this.container = options.container;
        this.isPlaying = false;
        this.audioBuffer = null;
        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
        this.source = null;
        
        // Mock BPM detection
        this.bpm = {
          current: 0,
          detect: async () => {
            // Simulate BPM detection
            await new Promise(resolve => setTimeout(resolve, 1000));
            this.bpm.current = Math.floor(Math.random() * 60) + 90; // 90-150 BPM
            return this.bpm.current;
          }
        };
      }
      
      async load(source) {
        this.log('Loading audio...');
        
        // Simulate loading
        if (typeof source === 'string') {
          this.log(`Loading from URL: ${source}`);
        } else if (source instanceof File) {
          this.log(`Loading file: ${source.name}`);
          const arrayBuffer = await source.arrayBuffer();
          this.audioBuffer = await this.audioContext.decodeAudioData(arrayBuffer);
        }
        
        // Mock audio buffer
        if (!this.audioBuffer) {
          this.audioBuffer = this.audioContext.createBuffer(2, 44100 * 10, 44100);
        }
        
        this.log('Audio loaded successfully!');
        return this.audioBuffer;
      }
      
      play() {
        if (this.isPlaying) return;
        
        this.log('Playing audio...');
        this.isPlaying = true;
        
        if (this.audioBuffer) {
          this.source = this.audioContext.createBufferSource();
          this.source.buffer = this.audioBuffer;
          this.source.connect(this.audioContext.destination);
          this.source.start();
          
          this.source.onended = () => {
            this.isPlaying = false;
            this.log('Playback ended');
          };
        }
      }
      
      stop() {
        if (this.source) {
          this.source.stop();
          this.source = null;
        }
        this.isPlaying = false;
        this.log('Playback stopped');
      }
      
      async getBPM() {
        return await this.bpm.detect();
      }
      
      log(message) {
        console.log(`[PlecoXA] ${message}`);
      }
    }
    
    // Example 1: Basic Load and Play
    const example1 = {
      pleco: new PlecoXA(),
      output: document.getElementById('example1-output'),
      
      init() {
        document.getElementById('example1-load').addEventListener('click', async () => {
          this.output.textContent = 'Loading audio...';
          await this.pleco.load('https://example.com/sample.mp3');
          this.output.textContent = 'Audio loaded! Ready to play.';
          
          document.getElementById('example1-play').disabled = false;
          document.getElementById('example1-stop').disabled = false;
        });
        
        document.getElementById('example1-play').addEventListener('click', () => {
          this.pleco.play();
          this.output.textContent = 'Playing...';
        });
        
        document.getElementById('example1-stop').addEventListener('click', () => {
          this.pleco.stop();
          this.output.textContent = 'Stopped.';
        });
      }
    };
    
    // Example 2: Drag & Drop
    const example2 = {
      pleco: new PlecoXA({ container: '#viz-container' }),
      output: document.getElementById('example2-output'),
      dropZone: document.getElementById('drop-zone'),
      
      init() {
        // Prevent default drag behaviors
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          this.dropZone.addEventListener(eventName, (e) => {
            e.preventDefault();
            e.stopPropagation();
          });
        });
        
        // Highlight drop zone
        ['dragenter', 'dragover'].forEach(eventName => {
          this.dropZone.addEventListener(eventName, () => {
            this.dropZone.classList.add('dragover');
          });
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
          this.dropZone.addEventListener(eventName, () => {
            this.dropZone.classList.remove('dragover');
          });
        });
        
        // Handle drop
        this.dropZone.addEventListener('drop', async (e) => {
          const file = e.dataTransfer.files[0];
          if (file && file.type.startsWith('audio/')) {
            this.output.textContent = `Loading ${file.name}...`;
            
            await this.pleco.load(file);
            const bpm = await this.pleco.getBPM();
            
            this.output.textContent = `âœ… Loaded: ${file.name}\nðŸŽµ Detected BPM: ${bpm}\nðŸ“Š Duration: ${(this.pleco.audioBuffer.duration).toFixed(1)}s`;
            
            // Auto-play
            this.pleco.play();
          }
        });
        
        // File input handler
        document.getElementById('file-input').addEventListener('change', async (e) => {
          const file = e.target.files[0];
          if (file) {
            this.output.textContent = `Loading ${file.name}...`;
            await this.pleco.load(file);
            const bpm = await this.pleco.getBPM();
            this.output.textContent = `âœ… Loaded: ${file.name}\nðŸŽµ Detected BPM: ${bpm}`;
          }
        });
      }
    };
    
    // Example 3: Beat Visualization
    const example3 = {
      init() {
        const beatCircle = document.getElementById('beat-circle');
        let beatInterval;
        
        document.getElementById('example3-demo').addEventListener('click', function() {
          if (this.textContent === 'Start Demo') {
            this.textContent = 'Stop Demo';
            
            // Simulate 120 BPM
            const bpm = 120;
            const beatDuration = 60000 / bpm; // ms per beat
            
            beatInterval = setInterval(() => {
              // Pulse animation
              gsap.fromTo(beatCircle, {
                scale: 1,
                boxShadow: '0 0 0 rgba(76, 175, 80, 0)'
              }, {
                scale: 1.3,
                boxShadow: '0 0 30px rgba(76, 175, 80, 0.8)',
                duration: 0.1,
                ease: "power2.out",
                yoyo: true,
                repeat: 1
              });
            }, beatDuration);
          } else {
            this.textContent = 'Start Demo';
            clearInterval(beatInterval);
          }
        });
      }
    };
    
    // Example 4: Themes
    const example4 = {
      themes: {
        winamp: {
          primary: '#00ff00',
          background: '#000',
          text: '#fff'
        },
        neon: {
          primary: '#00ffff',
          background: '#0a0a0a',
          text: '#fff'
        },
        custom: {
          primary: '#ff1744',
          background: '#1a1a1a',
          text: '#fff'
        }
      },
      
      init() {
        const vizContainer = document.getElementById('custom-viz');
        
        // Create simple viz element
        vizContainer.innerHTML = `
          <div style="padding: 20px; border: 2px solid #4CAF50; border-radius: 8px; background: #000; color: #fff; text-align: center;">
            <h3 style="margin: 0 0 10px 0;">Custom Visualizer</h3>
            <div id="theme-display" style="font-size: 24px; font-weight: bold;">---</div>
          </div>
        `;
        
        const applyTheme = (theme) => {
          const container = vizContainer.firstElementChild;
          container.style.borderColor = theme.primary;
          container.style.background = theme.background;
          container.style.color = theme.text;
          document.getElementById('theme-display').style.color = theme.primary;
          document.getElementById('theme-display').textContent = 'Theme Applied!';
          
          gsap.fromTo('#theme-display', {
            scale: 0.8,
            opacity: 0
          }, {
            scale: 1,
            opacity: 1,
            duration: 0.5,
            ease: "back.out(1.7)"
          });
        };
        
        document.getElementById('theme-winamp').addEventListener('click', () => {
          applyTheme(this.themes.winamp);
        });
        
        document.getElementById('theme-neon').addEventListener('click', () => {
          applyTheme(this.themes.neon);
        });
        
        document.getElementById('theme-custom').addEventListener('click', () => {
          applyTheme(this.themes.custom);
        });
      }
    };
    
    // Initialize all examples
    example1.init();
    example2.init();
    example3.init();
    example4.init();
  </script>
</body>
</html>