---
import { signatureDemo } from '../core/index.js';
import { applyLoop as applyLoopHelper } from '../scripts/ui/applyLoop.js';
const { audioBuffer, applyLoop = applyLoopHelper } = Astro.props;

async function runDemo() {
  const steps = signatureDemo(audioBuffer);
  for (const { fn, op } of steps) {
    const { buffer, loop } = fn();
    applyLoop(buffer, loop, op);
    await new Promise(r => setTimeout(r, 400));
  }
}
---
<button class="sig-demo" on:click={runDemo}>ðŸš€ Signature Demo</button>

<style>
.sig-demo { margin-top: .5rem; padding: .4rem .8rem; background: var(--accent); }
</style>
